<% if current_sort_mode_value == "on" %>

  <div class="relative flex w-full">
    <div class="relative glow w-full">
      <div class="w-full h-10 bg-white text-f-head/70 border-f-body border rounded p-2">
        ソート中は検索できません。
      </div>
    </div>
    <div class="w-10 bg-f-head/70 text-white rounded p-2">
      <svg class="size-6 text-white" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7" /><line x1="21" y1="21" x2="15" y2="15" />
      </svg>
    </div>
  </div>

<% else %>

  <%= search_form_for q, url: stocks_path, data: { turbo_frame: "main_frame" } do |f| %>
    <div class="relative flex w-full">
      <div data-controller="autocomplete" data-autocomplete-url-value="/stocks/search" role="combobox" class="relative glow w-full">
        <%= f.search_field :name_cont, data: { autocomplete_target: "input" }, class: "w-full h-10 bg-white border-f-body border rounded p-2", placeholder: "ストック名で検索" %>
        <%= f.hidden_field :name, data: { autocomplete_target: "hidden" } %>
        <ul class="list-group absolute top-10 z-40 w-full bg-white border-f-head border rounded shadow-sm" data-autocomplete-target="results"></ul>
      </div>
      <%= button_tag type: "submit", id: "search_button" , class: "w-10 bg-dull-green text-white rounded p-2" do %>
        <svg class="size-6 text-white" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7" /><line x1="21" y1="21" x2="15" y2="15" />
        </svg>
      <% end %>
    </div>
  <% end %>

<% end %>

<div id="index" class="w-full">
  <!-- ActionCableの購買キーをセット -->
  <%= turbo_stream_from current_user.partnership_stream_key %>

  <div class="w-full sticky top-16 md:top-20 bg-dull-beige z-30">
    <!-- ストック検索フォーム -->
    <div class="w-full px-4 py-2">
      <%= render "search_form", q: @q %>
    </div>

    <!-- フィルタリングボタン -->
    <div class="w-full bg-dull-beige text-f-head/50"> 
      <%= render "list_type_bar" %>
    </div>
  </div>

  <%# NOTE: indexをbroadcastで配信することはないため、ローカル変数はセッション値を読み取る %>
  <%= render "main_frame", stocks: @stocks, locations: @locations, list_type: current_list_type_value, sort_mode: current_sort_mode_value %>
</div>
